


        <!DOCTYPE html>
                <html>
                <head>
        <meta charset="utf-8">
                <title>Weather layer</title>
                <style>
                html, body, #map-canvas {
            height: 100%;
            margin: 0px;
            padding: 0px
        }
        </style>
        <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=weather"></script>
    <script>


function success(position){
    alert('here')

}


        function initialize() {

            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    var mapOptions = {
                        zoom: 12,
                        center: new google.maps.LatLng(position.coords.latitude,position.coords.longitude)
                    };

                    var map = new google.maps.Map(document.getElementById('map-canvas'),
                            mapOptions);

                    var weatherLayer = new google.maps.weather.WeatherLayer({
                        temperatureUnits: google.maps.weather.TemperatureUnit.CELSIUS
                    });
                    weatherLayer.setMap(map);

                    var cloudLayer = new google.maps.weather.CloudLayer();
                    cloudLayer.setMap(map);



                }, function(error) {
                    alert('Error occurred. Error code: ' + error.code +'\n Please use a different browser which supports html5 geolocation or a mobile phone with GPS capability');
                });
            }else{
                alert('no geolocation support');
            }


        }

        google.maps.event.addDomListener(window, 'load', initialize);

    </script>
</head>
<body>
<div id="map-canvas"></div>
</body>
</html>